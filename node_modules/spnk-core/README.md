<div align="center">
  <br />
  <p>
    <a href="https://github.com/SNIPPIK/node-spnk-core"><img src="https://cdn.discordapp.com/attachments/860113484493881365/869477290126487592/23c3dd7402ce6ec0.png" width="546" alt="" /></a>
  </p>
  <br />
</div>

## üì•Installation
- [**Node.js 16.x**](https://nodejs.org)
- [FFMPEG](http://ffmpeg.org/download.html) - (`npm install ffmpeg-static`) or (create dir ./ffmpeg/ and put ffmpeg there) or use function setFFmpeg

## üîóLinks
- [Documentation](https://github.com/SNIPPIK/node-spnk-core/tree/main/Docs) In dev
- [GitHub](https://github.com/SNIPPIK/node-spnk-core)
- [NPM](https://www.npmjs.com/package/spnk-core)
- [Discord](https://discord.com/) This library create for discord bot


## üìÑExample usage
<| [YouTube](https://www.youtube.com) |>
```js
const youtube = require('spnk-core').youtube; || {youtube} = require('spnk-core');

youtube(url, options); //Get audio (OGG/OPUS or your options.codec)
youtube.getVideo(); //Find video
youtube.getPlaylist(); //Find playlist
youtube.searchVideos(); //Find videos (default 15)
youtube.getVideoID(); //ID in url video
youtube.getPlaylistID(); //ID in url playlist
youtube.isValidVideo(); //Checking video url in valid

//Audio
youtube(url, {codec: ["-f", "mp3"]}).then(file => file.pipe(fs.createWriteStream('Audio.mp3')));
//Video
youtube.DownloadVideo(url, {quality: "1080p", format: "mp4"});
```
<| [Spotify](https://open.spotify.com) |>
```js
const spotify = require('spnk-core').spotify; || {spotify} = require('spnk-core');

spotify(url, options); //Get audio (OGG/OPUS or your options.codec)
spotify.getTrack(); //Find track
spotify.getPlaylist(); //Find playlist
spotify.getAlbum(); //Find album
spotify.getTrackID(); //ID in url
spotify.getPlaylistID(); //ID in url playlist
spotify.getAlbumID(); //ID in url album
spotify.getArtistID(); //ID in url artist
spotify.isValidTrack(); //Checking track url in valid

//Download Audio
spotify(url, {codec: ["-f", "mp3"]}).then(file => file.pipe(fs.createWriteStream('Audio.mp3')))
```
<| [Other]() |>
```js
const {file, OtherUrl, setFFmpeg} = require('spnk-core');
const ReadFile = fs.createReadStream(PathToFile);
const url = 'Any link, but it must lead to a resource';

file(ReadFile, options); //Get audio (OGG/OPUS or your options.codec)
OtherUrl(url, options); //Get audio (OGG/OPUS or your options.codec)
setFFmpeg('D:/FFmpeg/ffmpeg.exe'); //You can specify your location ffmpeg
```

# üîû | YouTube
- [You need cookie](https://cdn.discordapp.com/attachments/860113484493881365/872278395118043206/2021-1-04_033941.png).
Add cookies and forget about error 410 with age restriction
```js
const youtube = require('spnk-core').youtube; || {youtube} = require('spnk-core');

youtube.setCookie(cookie);
```

# üõëOptimization or Leak memory 
- FFMPEG is not auto deleted. You must remove it yourself.
  - How kill FFmpeg
```js
const {youtube} = require('spnk-core');

youtube(url).then(pipe => {
    if (!pipe.isKilled) pipe.kill();
})
```

# ‚öôÔ∏èOptions
- FFmpegArgs - Your arguments for FFmpeg (You configure FFmpeg yourself)
- codec - [All codecs](https://www.ffmpeg.org/ffmpeg-codecs.html#Audio-Encoders)
- highWaterMark - How much of the audio download to buffered into memory
- **encoderOptions**
  - seek - skip to a specific second
  - bassboost - Increases the volume of the bass
  - noLossFrame - Lossless quality (video or audio)
  - to - Cropping to a specific second

```json
{
  "FFmpegArgs": [],
  "highWaterMark": 25,
  "codec": ["-f", "mp3"],
  "encoderOptions": {
    "seek": 0,
    "bassboost": false,
    "noLossFrame": false,
    "to": null
  }
}
```